{"version":3,"sources":["components/Header/index.js","components/OrderItem/index.js","components/OrderList/index.js","components/App/index.js","index.js"],"names":["Header","_Component","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","apply","arguments","inherits","createClass","key","value","react_default","a","createElement","className","Component","OrderItem","props","_this","call","handleOpenEditArea","setState","editing","handleCommentChange","event","comment","target","handleClickStars","stars","console","log","handleCancelComment","handleSubmitComment","item_id","data","_this$state","state","onSubmit","_this$props$data","shop_title","title","coupon_start_fee","pict_url","isCommented","src","alt","onClick","renderEditArea","onChange","renderStarts","_this2","map","item","index","lightClass","bind","OrderList","handleSubmit","newDate","objectSpread","fetch","then","res","ok","json","result_list","map_data","catch","error","_this3","components_OrderItem","App","components_Header","components_OrderList","ReactDOM","render","components_App","document","getElementById"],"mappings":"ySASeA,SANf,SAAAC,GAAA,SAAAD,IAAA,OAAAE,OAAAC,EAAA,EAAAD,CAAAE,KAAAJ,GAAAE,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAAF,GAAAO,MAAAH,KAAAI,YAAA,OAAAN,OAAAO,EAAA,EAAAP,CAAAF,EAAAC,GAAAC,OAAAQ,EAAA,EAAAR,CAAAF,EAAA,EAAAW,IAAA,SAAAC,MAAA,WAEI,OAAOC,EAAAC,EAAAC,cAAA,UAAQC,UAAU,UAAlB,gCAFXhB,EAAA,CAA4BiB,qBCwIbC,SAxIf,SAAAjB,GACE,SAAAiB,EAAYC,GAAO,IAAAC,EAAA,OAAAlB,OAAAC,EAAA,EAAAD,CAAAE,KAAAc,IACjBE,EAAAlB,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAAgB,GAAAG,KAAAjB,KAAMe,KAgGRG,mBAAqB,WACnBF,EAAKG,SAAS,CACZC,SAAS,KAnGMJ,EAuGnBK,oBAAsB,SAAAC,GACpBN,EAAKG,SAAS,CACZI,QAASD,EAAME,OAAOhB,SAzGPQ,EA6GnBS,iBAAmB,SAAAC,GACjBC,QAAQC,IAAI,SAAUF,GACtBV,EAAKG,SAAS,CACZO,MAAOA,KAhHQV,EAoHnBa,oBAAsB,WACpBb,EAAKG,SAAS,CACZC,SAAS,EACTG,QAASP,EAAKD,MAAMQ,SAAW,GAC/BG,MAAOV,EAAKD,MAAMW,OAAS,KAxHZV,EA4HnBc,oBAAsB,WAAM,IAClBC,EAAYf,EAAKD,MAAMiB,KAAvBD,QADkBE,EAECjB,EAAKkB,MAAxBX,EAFkBU,EAElBV,QAASG,EAFSO,EAETP,MACjBV,EAAKG,SAAS,CACZC,SAAS,IAGXJ,EAAKD,MAAMoB,SAASJ,EAASR,EAASG,IAjItCV,EAAKkB,MAAQ,CACXd,SAAS,EACTM,MAAOX,EAAMiB,KAAKN,OAAS,EAC3BH,QAASR,EAAMiB,KAAKT,SAAW,IALhBP,EADrB,OAAAlB,OAAAO,EAAA,EAAAP,CAAAgB,EAAAjB,GAAAC,OAAAQ,EAAA,EAAAR,CAAAgB,EAAA,EAAAP,IAAA,SAAAC,MAAA,WAUW,IAAA4B,EAOHpC,KAAKe,MAAMiB,KALbK,EAFKD,EAELC,WACAC,EAHKF,EAGLE,MACAC,EAJKH,EAILG,iBACAC,EALKJ,EAKLI,SACAC,EANKL,EAMLK,YAGF,OACEhC,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,OAAKC,UAAU,aACbH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,0BAEbH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,iBAAiB8B,IAAKF,EAAUG,IAAI,SAErDlC,EAAAC,EAAAC,cAAA,OAAKC,UAAU,sBACbH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,sBAAsB0B,GACrC7B,EAAAC,EAAAC,cAAA,OAAKC,UAAU,mBAAmByB,GAClC5B,EAAAC,EAAAC,cAAA,OAAKC,UAAU,qBACbH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,oBAAoB2B,GAClCE,EACChC,EAAAC,EAAAC,cAAA,UAAQC,UAAU,uCAAlB,sBAIAH,EAAAC,EAAAC,cAAA,UACEiC,QAAS5C,KAAKkB,mBACdN,UAAU,sCAFZ,mBAUPZ,KAAKkC,MAAMd,QAAUpB,KAAK6C,iBAAmB,QA9CtD,CAAAtC,IAAA,iBAAAC,MAAA,WAoDI,OACEC,EAAAC,EAAAC,cAAA,OAAKC,UAAU,+BACbH,EAAAC,EAAAC,cAAA,YACEmC,SAAU9C,KAAKqB,oBACfb,MAAOR,KAAKkC,MAAMX,QAClBX,UAAU,uBAEXZ,KAAK+C,eACJ/C,KAAKe,MAAMiB,KAAKS,YAOd,KANFhC,EAAAC,EAAAC,cAAA,UACEC,UAAU,qCACVgC,QAAS5C,KAAK8B,qBAFhB,gBAOFrB,EAAAC,EAAAC,cAAA,UACEC,UAAU,sCACVgC,QAAS5C,KAAK6B,qBAFhB,mBApER,CAAAtB,IAAA,eAAAC,MAAA,WA8EiB,IAAAwC,EAAAhD,KACL0B,EAAU1B,KAAKkC,MAAfR,MACR,OACEjB,EAAAC,EAAAC,cAAA,WACG,CAAC,EAAG,EAAG,EAAG,EAAG,GAAGsC,IAAI,SAACC,EAAMC,GAC1B,IAAMC,EAAa1B,GAASwB,EAAO,yBAA2B,GAC9D,OACEzC,EAAAC,EAAAC,cAAA,QACEJ,IAAK4C,EACLvC,UAAW,mBAAqBwC,EAChCR,QAASI,EAAKvB,iBAAiB4B,KAAKL,EAAME,IAH5C,iBArFZpC,EAAA,CAA+BD,cC2DhByC,EA3Df,SAAAzD,GACE,SAAAyD,EAAYvC,GAAO,IAAAC,EAAA,OAAAlB,OAAAC,EAAA,EAAAD,CAAAE,KAAAsD,IACjBtC,EAAAlB,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAAwD,GAAArC,KAAAjB,KAAMe,KAuCRwC,aAAe,SAACxB,EAASR,EAASG,GAEhC,IAAM8B,EAAUxC,EAAKkB,MAAMF,KAAKiB,IAAI,SAAAC,GAClC,OAAOA,EAAKnB,UAAYA,EAAjBjC,OAAA2D,EAAA,EAAA3D,CAAA,GAEEoD,EAFF,CAGD3B,UACAG,QACAe,aAAa,IAEfS,IAENlC,EAAKG,SAAS,CACZa,KAAMwB,KAnDRxC,EAAKkB,MAAQ,CACXF,KAAM,IAHShB,EADrB,OAAAlB,OAAAO,EAAA,EAAAP,CAAAwD,EAAAzD,GAAAC,OAAAQ,EAAA,EAAAR,CAAAwD,EAAA,EAAA/C,IAAA,oBAAAC,MAAA,WAQsB,IAAAwC,EAAAhD,KAClB0D,MAAM,sBACHC,KAAK,SAAAC,GACAA,EAAIC,IACND,EACGE,OACAH,KAAK,SAAA3B,GACJgB,EAAK7B,SAAS,CACZa,KAAMA,EAAKA,KAAK+B,YAAYC,aAG/BC,MAAM,SAAAC,GAAK,OAAIvC,QAAQuC,MAAM,0CAAaA,OAGhDD,MAAM,SAAAC,GAAK,OAAIvC,QAAQuC,MAAM,0CAAaA,OAtBjD,CAAA3D,IAAA,SAAAC,MAAA,WAyBW,IAAA2D,EAAAnE,KACP,OACES,EAAAC,EAAAC,cAAA,WACGX,KAAKkC,MAAMF,KAAKiB,IAAI,SAAAC,GACnB,OACEzC,EAAAC,EAAAC,cAACyD,EAAD,CACE7D,IAAK2C,EAAKnB,QACVC,KAAMkB,EACNf,SAAUgC,EAAKZ,sBAjC7BD,EAAA,CAA+BzC,aCWhBwD,MATf,WACE,OACE5D,EAAAC,EAAAC,cAAA,OAAKC,UAAU,OACbH,EAAAC,EAAAC,cAAC2D,EAAD,MACA7D,EAAAC,EAAAC,cAAC4D,EAAD,QCJNC,IAASC,OAAOhE,EAAAC,EAAAC,cAAC+D,EAAD,MAASC,SAASC,eAAe","file":"static/js/main.0eb04a72.chunk.js","sourcesContent":["import React, { Component } from \"react\";\nimport \"./style.css\";\n\nexport class Header extends Component {\n  render() {\n    return <header className='header'>我的订单</header>;\n  }\n}\n\nexport default Header;\n","import React, { Component } from \"react\";\nimport \"./style.css\";\n\nexport class OrderItem extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      editing: false,\n      stars: props.data.stars || 0,\n      comment: props.data.comment || \"\"\n    };\n  }\n\n  render() {\n    const {\n      shop_title,\n      title,\n      coupon_start_fee,\n      pict_url,\n      isCommented\n    } = this.props.data;\n\n    return (\n      <div>\n        <div className=\"orderItem\">\n          <div className=\"orderItem_picContainer\">\n            {/* orderItem_picContainer--  :BEM  css命名规范 */}\n            <img className=\"orderItem__pic\" src={pict_url} alt=\"PIC\" />\n          </div>\n          <div className=\"orderItem__content\">\n            <div className=\"orderItem__product\">{title}</div>\n            <div className=\"orderItem__shop\">{shop_title}</div>\n            <div className=\"orderItem__detail\">\n              <div className=\"orderItem__price\">{coupon_start_fee}</div>\n              {isCommented ? (\n                <button className=\"orderItem__btn orderItem__btn--gray\">\n                  已评价\n                </button>\n              ) : (\n                <button\n                  onClick={this.handleOpenEditArea}\n                  className=\"orderItem__btn orderItem__btn--red\"\n                >\n                  评价\n                </button>\n              )}\n            </div>\n          </div>\n        </div>\n        {this.state.editing ? this.renderEditArea() : null}\n      </div>\n    );\n  }\n\n  renderEditArea() {\n    return (\n      <div className=\"orderItem__commentContainer\">\n        <textarea\n          onChange={this.handleCommentChange}\n          value={this.state.comment}\n          className=\"orderItem__comment\"\n        />\n        {this.renderStarts()}\n        {!this.props.data.isCommented ? (\n          <button\n            className=\"orderItem__btn orderItem__btn--red\"\n            onClick={this.handleSubmitComment}\n          >\n            提交\n          </button>\n        ) : null}\n        <button\n          className=\"orderItem__btn orderItem__btn--gray\"\n          onClick={this.handleCancelComment}\n        >\n          取消\n        </button>\n      </div>\n    );\n  }\n\n  renderStarts() {\n    const { stars } = this.state;\n    return (\n      <div>\n        {[1, 2, 3, 4, 5].map((item, index) => {\n          const lightClass = stars >= item ? \"orderItem__star--light\" : \"\";\n          return (\n            <span\n              key={index}\n              className={\"orderItem__star \" + lightClass}\n              onClick={this.handleClickStars.bind(this, item)}\n            >\n              ★\n            </span>\n          );\n        })}\n      </div>\n    );\n  }\n\n  handleOpenEditArea = () => {\n    this.setState({\n      editing: true\n    });\n  };\n\n  handleCommentChange = event => {\n    this.setState({\n      comment: event.target.value\n    });\n  };\n\n  handleClickStars = stars => {\n    console.log(\"stars:\", stars);\n    this.setState({\n      stars: stars\n    });\n  };\n\n  handleCancelComment = () => {\n    this.setState({\n      editing: false,\n      comment: this.props.comment || \"\",\n      stars: this.props.stars || 0\n    });\n  };\n\n  handleSubmitComment = () => {\n    const { item_id } = this.props.data;\n    const { comment, stars } = this.state;\n    this.setState({\n      editing: false\n    });\n\n    this.props.onSubmit(item_id, comment, stars);\n  };\n}\n\nexport default OrderItem;\n","import React, { Component } from \"react\";\nimport OrderItem from \"../OrderItem\";\n\nexport class OrderList extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      data: []\n    };\n  }\n\n  componentDidMount() {\n    fetch(\"./mock/orders.json\")\n      .then(res => {\n        if (res.ok) {\n          res\n            .json()\n            .then(data => {\n              this.setState({\n                data: data.data.result_list.map_data\n              });\n            })\n            .catch(error => console.error(\"请求数据失败a: \", error));\n        }\n      })\n      .catch(error => console.error(\"请求数据失败b: \", error));\n  }\n\n  render() {\n    return (\n      <div>\n        {this.state.data.map(item => {\n          return (\n            <OrderItem\n              key={item.item_id}\n              data={item}\n              onSubmit={this.handleSubmit}\n            />\n          );\n        })}\n      </div>\n    );\n  }\n\n  handleSubmit = (item_id, comment, stars) => {\n    // fetch(\"/saveComment\").then(() => {});\n    const newDate = this.state.data.map(item => {\n      return item.item_id === item_id\n        ? {\n            ...item,\n            comment,\n            stars,\n            isCommented: true\n          }\n        : item;\n    });\n    this.setState({\n      data: newDate\n    });\n  };\n}\n\nexport default OrderList;\n","import React from \"react\";\nimport \"./style.css\";\nimport Header from \"../Header\";\nimport OrderList from \"../OrderList\";\n\nfunction App() {\n  return (\n    <div className=\"app\">\n      <Header />\n      <OrderList />\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n"],"sourceRoot":""}